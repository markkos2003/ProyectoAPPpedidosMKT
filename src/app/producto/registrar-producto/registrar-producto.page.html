<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/listar-producto"></ion-back-button>
    </ion-buttons>
    <ion-title>REGISTRAR PRODUCTO</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="form-container">
    <form (ngSubmit)="registrarProducto()">
      
      <div class="image-preview" *ngIf="producto.imagen">
        <img [src]="producto.imagen" alt="Preview">
        <ion-button fill="clear" color="danger" (click)="eliminarImagen()">
          <ion-icon name="close-circle"></ion-icon>
        </ion-button>
      </div>

      <ion-button expand="block" fill="outline" (click)="seleccionarImagen()" type="button">
        <ion-icon slot="start" name="camera"></ion-icon>
        AGREGAR IMAGEN
      </ion-button>

      <input 
        type="file" 
        #fileInput 
        accept="image/*" 
        (change)="onFileSelected($event)" 
        style="display: none;">

      <ion-item>
        <ion-label position="floating">Nombre del Producto</ion-label>
        <ion-input 
          type="text" 
          [(ngModel)]="producto.nombre" 
          name="nombre" 
          required>
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Precio</ion-label>
        <ion-input 
          type="number" 
          [(ngModel)]="producto.precio" 
          name="precio" 
          min="0"
          step="0.01"
          required>
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Stock</ion-label>
        <ion-input 
          type="number" 
          [(ngModel)]="producto.stock" 
          name="stock"
          min="0">
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Descripci√≥n</ion-label>
        <ion-textarea 
          [(ngModel)]="producto.descripcion" 
          name="descripcion"
          rows="3">
        </ion-textarea>
      </ion-item>

      <ion-button 
        expand="block" 
        type="submit" 
        class="submit-btn"
        [disabled]="!producto.nombre || !producto.precio">
        GUARDAR PRODUCTO
      </ion-button>
    </form>
  </div>
</ion-content>